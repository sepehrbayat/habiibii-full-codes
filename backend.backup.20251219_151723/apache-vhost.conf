# Apache Virtual Host Configuration for 6amMart Laravel
# کپی این فایل به /etc/apache2/sites-available/6ammart.conf

<VirtualHost *:80>
    ServerName 188.245.192.118
    ServerAlias www.yourdomain.com
    DocumentRoot /var/www/6ammart-laravel/public

    <Directory /var/www/6ammart-laravel/public>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Security Headers
        Header always set X-Frame-Options "SAMEORIGIN"
        Header always set X-Content-Type-Options "nosniff"
        Header always set X-XSS-Protection "1; mode=block"
    </Directory>

    # Logging
    ErrorLog ${APACHE_LOG_DIR}/6ammart_error.log
    CustomLog ${APACHE_LOG_DIR}/6ammart_access.log combined

    # PHP Settings
    <FilesMatch \.php$>
        SetHandler "proxy:unix:/var/run/php/php8.2-fpm.sock|fcgi://localhost"
    </FilesMatch>
</VirtualHost>

# Virtual Host for React App (Port 3000)
# اگر از Apache برای React استفاده می‌کنید
<VirtualHost *:3000>
    ServerName 188.245.192.118
    DocumentRoot /var/www/react-app

    <Directory /var/www/react-app>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        # React Router Support
        RewriteEngine On
        RewriteBase /
        RewriteRule ^index\.html$ - [L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . /index.html [L]
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/react_error.log
    CustomLog ${APACHE_LOG_DIR}/react_access.log combined
</VirtualHost>

